FROM node:latest

WORKDIR /knowme-api

COPY package*.json /knowme-api/

RUN npm install 

COPY . .

RUN npm run build

ENV PORT=3000
ENV SERVER_URL=http://localhost
ENV DATABASE_URL=mongodb://knowme:knowme@localhost:27017/admin
ENV AIRTABLE_API_KEY=keyjGyh3eLA7aA9ji
ENV AIRTABLE_BASE_ID=appTuXinTtL4u4zOl
ENV AIRTABLE_BASE_URL=https://api.airtable.com
ENV TWITTER_API_KEY=immHQbLdsiyqz3NGNDFB7r2Ft
ENV TWITTER_API_KEY_SECRET=7H7waVrSh0s5e5ypFMjVYw7oqd7res6BsCYqfQGPnqNbxAW5cJ
ENV TWITTER_API_BEARER_TOKEN=AAAAAAAAAAAAAAAAAAAAAFQqawEAAAAAmcULdjFQYbxoduqr0Q0VWduzxqs%3DIM8LcFPchld1rx1RZigyixzdESRK8JsbExhAaJ6U81ddDe1Ie3
ENV TWITTER_BASE_URL=https://api.twitter.com/2/
ENV TWITTER_USER_ID=1191378332295843841
ENV HASHNODE_PERSONAL_ACCESS_TOKEN=a8bcc454-8d84-44e5-88ff-f3c24503996a
ENV HASHNODE_USERNAME=sarthakjdev
ENV HASHNODE_BASE_URL=https://api.hashnode.com
ENV OEMBED_BASE_URL=https://publish.twitter.com/oembed
ENV TWITTER_USERNAME=sarthakjdev
ENV JWT_SECRET_KEY=06250810f24bc862f4b519429dcef83580eaab9af9ef36ccaf0aaa6785fd46b50cd4200db837602097c1ba6c8d591f434bd49cc7c31d0b0df69666f37f788d6b
ENV JWT_REFRESH_SECRET_KEY=cb0e10a3a231b03759ff24f3dc72428e223a974b90ad59b6fc7e3a107800f31da91eca26c84562853c6a4929a075153bcda76302d8053a991611287d476f6084%

RUN npx prisma generate

EXPOSE 3000

CMD ["npm", "start"]